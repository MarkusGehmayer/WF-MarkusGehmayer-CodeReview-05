
var datingJson = [
    {
        "id" : "1",
        "name" : "Mr Lova Lova",
        "age" : "31",
        "gender" : "male",
        "location" : "Vienna",
        "hobbies" : ["make love", "make more love", "looooooove"],
        "music" : "Latin",
        "picurl" : "./img./man.jpg",
        "text" : "Hello Bebe?",
        "isLiked" : "false"
    },
    {
        "id" : "2",
        "name" : "Dr. Granade",
        "age" : "49",
        "gender" : "male",
        "location" : "Graz",
        "hobbies" : ["being awesome", "being cute", "being anything"],
        "music" : "Rock",
        "picurl" : "./img./man2.jpg",
        "text" : "Wakka wakka!",
        "isLiked" : "false"
    },
    {
        "id" : "3",
        "name" : "Jonny Bravo",
        "age" : "24",
        "gender" : "male",
        "location" : "Springfield",
        "hobbies" : ["training", "train 4 2", "train train train"],
        "music" : "Funky",
        "picurl" : "./img./man3.jpg",
        "text" : "Hey sexy Mammma!",
        "isLiked" : "false"
    },
    {
        "id" : "4",
        "name" : "Mr Universe",
        "age" : "34",
        "gender" : "male",
        "location" : "Vienna",
        "hobbies" : ["dance", "love", "love 2 love me"],
        "music" : "Love Songs",
        "picurl" : "./img./man4.jpg",
        "text" : "I'm too sexy!",
        "isLiked" : "false"
    },{
        "id" : "5",
        "name" : "Mr Lova Lova",
        "age" : "31",
        "gender" : "male",
        "location" : "Vienna",
        "hobbies" : ["make love", "make more love", "looooooove"],
        "music" : "Latin",
        "picurl" : "./img./man5.jpg",
        "text" : "Waaaazzzuuuup?",
        "isLiked" : "false"
    },
    {
        "id" : "6",
        "name" : "Dr. Granade",
        "age" : "49",
        "gender" : "male",
        "location" : "Graz",
        "hobbies" : ["being awesome", "being cute", "being anything"],
        "music" : "Rock",
        "picurl" : "./img./man6.jpg",
        "text" : "Be with me!",
        "isLiked" : "false"
    },
    {
        "id" : "7",
        "name" : "Jonny Bravo",
        "age" : "24",
        "gender" : "male",
        "location" : "Springfield",
        "hobbies" : ["training", "train 4 2", "train train train"],
        "music" : "Funky",
        "picurl" : "./img./man7.jpg",
        "text" : "Nihaha and so on..",
        "isLiked" : "false"
    },
    {
        "id" : "8",
        "name" : "Mr Universe",
        "age" : "34",
        "gender" : "male",
        "location" : "Vienna",
        "hobbies" : ["dance", "love", "love 2 love me"],
        "music" : "Love Songs",
        "picurl" : "./img./man8.jpg",
        "text" : "Need a green card!!",
        "isLiked" : "false"
    },
    {
        "id" : "9",
        "name" : "Mrs Berry",
        "age" : "27",
        "gender" : "female",
        "location" : "Vienna",
        "hobbies" : ["dancing", "play with my dogs", "music"],
        "music" : "Pop",
        "picurl" : "./img./blond_w.jpg",
        "text" : "Hey Boys!",
        "isLiked" : "false"
    },
    {
        "id" : "10",
        "name" : "Lady Feel-Good",
        "age" : "19",
        "gender" : "female",
        "location" : "New York",
        "hobbies" : ["feeling fine", "feeling good", "some more feelings"],
        "music" : "Techno",
        "picurl" : "./img./blond2_w.jpg",
        "text" : "Need some real men!",
        "isLiked" : "false"
    },
    {
        "id" : "11",
        "name" : "Pumpanella",
        "age" : "40",
        "gender" : "female",
        "location" : "Salzburg",
        "hobbies" : ["pumpin'", "something", "more of something"],
        "music" : "K-Pop",
        "picurl" : "./img./blond3_w.jpg",
        "text" : "I like girls and boys",
        "isLiked" : "false"
    },
    {
        "id" : "12",
        "name" : "Marge Simpson",
        "age" : "59",
        "gender" : "female",
        "location" : "Vienna",
        "hobbies" : ["cleaning", "talking", "reading"],
        "music" : "Enya",
        "picurl" : "./img./brown_w.jpg",
        "text" : "Nanana nanananaaa",
        "isLiked" : "false"
    },
    {
        "id" : "13",
        "name" : "Die gute Ute",
        "age" : "41",
        "gender" : "female",
        "location" : "Salzburg",
        "hobbies" : ["walking", "being Ute", "being good"],
        "music" : "Gospel",
        "picurl" : "./img./brown2_w.jpg",
        "text" : "Hello out there!",
        "isLiked" : "false"
    },{
        "id" : "14",
        "name" : "Pumpanella",
        "age" : "40",
        "gender" : "female",
        "location" : "Salzburg",
        "hobbies" : ["pumpin'", "something", "more of something"],
        "music" : "K-Pop",
        "picurl" : "./img./brown4_w.jpg",
        "text" : "I like girls and boys",
        "isLiked" : "false"
    },
    {
        "id" : "15",
        "name" : "Marge Simpson",
        "age" : "49",
        "gender" : "female",
        "location" : "Vienna",
        "hobbies" : ["cleaning", "talking", "reading"],
        "music" : "Enya",
        "picurl" : "./img./brown5_w.jpg",
        "text" : "Hello World?",
        "isLiked" : "false"
    },
    {
        "id" : "16",
        "name" : "Die gute Ute",
        "age" : "37",
        "gender" : "female",
        "location" : "Salzburg",
        "hobbies" : ["walking", "being Ute", "being good"],
        "music" : "Gospel",
        "picurl" : "./img./brown3_w.jpg",
        "text" : "Hidi ho!",
        "isLiked" : "false"
    },
]

var dating = JSON.stringify(datingJson);
    dating = JSON.parse(dating);
var userArea = document.getElementById('container-Users');
var userFavorite = document.getElementById('container-Favorites');

aufbau();

function aufbau() {
    showUser(dating); filterUsers(dating); searchUsers(dating);
    showFavorites(); changeFavorites(); 
}

function showUser(arr) {
    userArea.innerHTML = ""
    for(var User of arr) {
        userArea.innerHTML +=
        `
        <div class="col-lg-3 col-md-6 mb-3">
            <div class="card" style="width: 80%;" id="${User.id}">
                <img src="${User.picurl}" class="card-img-top" alt="pic">
                    <div class="card-body">
                        <h6 class="card-title">${User.name}, <small class="card-text" style="color: #ea899a;"><i class="fas fa-birthday-cake" style="color:#ea899a;"></i> ${User.age}</small></h6>

                        <p class="card-text">${User.text}</p>
                        <button class="${User.isLiked === "true" ? "btn btn-primary active" : "btn btn-primary"}">&hearts;</button>
                    </div>
            </div>
        </div>
        `
    }
}

function filterUsers(arr) {
    var btn = document.getElementById('sortBtn');
    btn.children[0].addEventListener('click', event => {
        arr.sort((start, end) => parseInt(start.age) - parseInt(end.age));
        showUser(arr);
    })

    btn.children[1].addEventListener('click', event => {
        var newArr = arr.filter(x => x.gender === "female");
        showUser(newArr);
    })

    btn.children[2].addEventListener('click', event => {
        var newArr = arr.filter(x => x.gender === "male");
        showUser(newArr);
    })
}

function searchUsers(arr) {
    var btn = document.getElementById('searchBtn');
    var input = document.getElementById('searchInput');
    var newArr = [];
    btn.addEventListener('click', event => {
        newArr = arr.filter(x => x.name.toLowerCase().startsWith(input.value.toLowerCase()));
        showUser(newArr);
    })
}

function showFavorites() {
    userFavorite.innerHTML = ""
    for(var User of dating) {
        if(User.isLiked === "true") {
            userFavorite.innerHTML +=
            `
            <div class="col-lg-5 col-md-5 mb-4">
                <div class="card" style="width: 70%;" id="${User.id}">
                    <img src="${User.picurl}" class="card-img-top" style="width: 70%;" alt="pic">
                    <div class="card-body">
                        <h5 class="card-title mb-0" style="color: #ea899a;">${User.name}, <span style="color: #ea899a;">${User.age}</span></h5>
                        <br>
                        <p class="card-text mt-0"><i class="fas fa-map-pin"></i> ${User.location}</p>
                        <p class="card-text"><i class="fas fa-heart" style="color:#ea899a;"></i> ${User.hobbies[0]}, ${User.hobbies[1]}, ${User.hobbies[2]}.</p>
                        <p class="card-text"><i class="fa fa-music"></i> ${User.music} <i class="fa fa-music"></i></p>
                        <a href="#" class="btn btn-primary" style="background-color:#ea899a;border-color:pink">close</a>
                    </div>
                </div>
            </div>
            `
        } 
    }
}

function changeFavorites() {
    userArea.addEventListener('click', event => {
        if(event.target.innerText === "â™¥") {
            event.target.classList.toggle("active");
                dating[parseInt(event.target.parentNode.parentNode.id) - 1].isLiked === "false"
            ?   dating[parseInt(event.target.parentNode.parentNode.id) - 1].isLiked = "true"
            :   dating[parseInt(event.target.parentNode.parentNode.id) - 1].isLiked = "false";
        }
        showFavorites();
    })

    userFavorite.addEventListener('click', event => {
        if(event.target.innerText === "close") {
            dating[parseInt(event.target.parentNode.parentNode.id) - 1].isLiked = "false";
            
            var activeFavorite = document.getElementById(event.target.parentNode.parentNode.id)
            activeFavorite.lastElementChild.lastElementChild.classList.remove("active");
        }
        showFavorites();
    })
}

